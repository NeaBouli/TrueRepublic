@using PnyxWebAssembly.Client.Entities
<MudDialog>
    <DialogContent>
        <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
            <MudTabPanel Text="Browse">
                <MudForm @ref="Form" @bind-Errors="@Errors">
                    <MudContainer Style="margin-bottom: 20px">
                        <MudGrid>
                            <MudItem xs="6">
                                <MudChipSet Filter="true" SelectedChipChanged="@(OnSelectedChipChanged)" @bind-SelectedValues="SelectedValues">
                                    @foreach (HashtagSelected hashtag in Hashtags)
                                    {
                                        <MudChip Color="Color.Primary" Text="@hashtag.Hashtag" Default="@hashtag.Selected">@hashtag.Hashtag</MudChip>
                                    }
                                </MudChipSet>
                            </MudItem>
                            <MudItem xs="4">
                                <MudTextField @bind-Value="SearchText" Label="Search" Variant="Variant.Text"
                                              Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Search"
                                              Validation="@(new Func<string, IEnumerable<string>>(ValidateSearch))"
                                              Required="true"
                                              RequiredError="Ein Suchtext muss angegeben werden"
                                              OnAdornmentClick="@(OnSearchClick)" OnKeyUp="@(OnSearchKeyUp)"/>
                            </MudItem>
                        </MudGrid>
                    </MudContainer>
                    @if (ImageItems.Count == 0)
                    {
                        <MudText Typo="Typo.h6">Keine Bilder gefunden</MudText>
                    }
                    else
                    {
                        <MudContainer Style="max-height: 480px; overflow-y: scroll">
                            <MudRadioGroup @bind-SelectedOption="SelectedPaper">
                                <MudGrid>
                                    @foreach (ImageItem imageItem in ImageItems)
                                    {
                                        <MudItem xs="2" Style="min-height: 170px; min-width: 170px">
                                            <MudPaper Class="d-flex"
                                                      Style="background-color: lightgray; min-height: 150px; min-width: 150px">
                                                <MudRadio Option="@imageItem.Id" Color="Color.Default" Size="Size.Medium" Style="margin-left: 50%; margin-top: -75px">
                                                    @imageItem.Id
                                                </MudRadio>
                                            </MudPaper>
                                        </MudItem>
                                    }
                                </MudGrid>
                            </MudRadioGroup>
                        </MudContainer>
                    }
                </MudForm>
            </MudTabPanel>
            <MudTabPanel Text="Upload">
                <MudContainer Style="margin-bottom: 20px">
                    <MudText>Upload</MudText>
                </MudContainer>
            </MudTabPanel>
        </MudTabs>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Primary" OnClick="Submit">Ok</MudButton>
    </DialogActions>
</MudDialog>
