# v0.3.0 Roadmap — Advanced Security & Platform Expansion

**Status:** Planned
**Target:** Q3 2026
**Prerequisite:** v0.2.1 (Feature Complete Governance)

---

## Context

v0.2.0 delivered ~95% whitepaper feature coverage. The governance core is complete:
all 5 tokenomics equations, systemic consensing scoring, person election voting,
domain interest payouts, suggestion lifecycle, permission register, big purge,
admin elections, member exclusion, fast delete, and anonymous voting with domain
key pairs.

v0.3.0 focuses on **hardening the anonymity layer** (ZKP replacing ed25519 domain
keys), **integrating CosmWasm contracts**, and **expanding the DEX via IBC**.

---

## What's Already Done (NOT in v0.3.0 scope)

These features are fully implemented and tested. Do NOT re-implement:

| Feature | File(s) | Tests |
|---------|---------|-------|
| Permission Register | `anonymity.go`, MsgJoinPermissionRegister, MsgPurgePermissionRegister | Yes |
| Big Purge | `MsgPurgePermissionRegister` in msg_server.go | Yes |
| Suggestion Lifecycle (Green/Yellow/Red) | `lifecycle.go`, ProcessAllLifecycles in EndBlock | Yes |
| Fast Delete (2/3 majority) | `MsgVoteToDelete`, lifecycle.go | Yes |
| Member Exclusion (2/3 majority) | `MsgVoteToExclude`, governance.go | Yes |
| Admin Election (elected/fixed) | `governance.go`, ProcessGovernance in EndBlock | Yes |
| eq.1 CalcDomainCost | `treasury/keeper/rewards.go` | Yes |
| eq.2 CalcReward (RateToEarn) | `treasury/keeper/rewards.go` | Yes |
| eq.3 CalcPutPrice (PayToPut) | `treasury/keeper/rewards.go` | Yes |
| eq.4 CalcDomainInterest | `treasury/keeper/rewards.go`, DistributeDomainInterest in EndBlock | Yes |
| eq.5 CalcNodeReward | `treasury/keeper/rewards.go`, DistributeStakingRewards in EndBlock | Yes |
| VoteToEarn (Stones) | `stones.go`, MsgPlaceStoneOnIssue/Suggestion/Member | Yes |
| Systemic Consensing Score | `scoring.go` | Yes |
| Person Election Voting | `election.go`, MsgCastElectionVote | Yes |
| Anonymous Ratings | `keeper.go` RateProposalWithSignature, MsgRateProposal | Yes |

---

## v0.3.0 Scope

### P0: Zero-Knowledge Proofs for Anonymity (WP S4)

**Current state:** Domain key pairs use ed25519 signatures. The public key is stored
in the permission register, creating a linkable pseudonym per domain. While unlinkable
across domains, within a domain the same key is reused for all votes/ratings.

**Goal:** Replace ed25519 domain key signatures with ZK-SNARK proofs that demonstrate
membership in the permission register without revealing which key is being used.

**Components:**
- ZKP circuit: "I know a private key whose public key is in this domain's permission register"
- On-chain verifier (Groth16 or PLONK)
- Client-side proof generation
- Migration path from ed25519 to ZKP (backward compatible)

**Files:**
- `x/truedemocracy/zkp.go` (verifier)
- `x/truedemocracy/zkp_test.go`
- Client-side: proof generation library (Rust or Go)

**Estimated:** 3-4 weeks, 10-15 tests

---

### P1: CosmWasm Contract Integration

**Current state:** `contracts/src/governance.rs` and `contracts/src/treasury.rs` exist
as placeholder implementations. They compile but are not wired to the chain.

**Goal:** Integrate CosmWasm VM so contracts can interact with domain treasuries
and governance state.

**Components:**
- Wire `x/wasm` module into `app.go`
- Contract-to-keeper bindings (custom queries/messages)
- Treasury interaction from contracts

**Files:**
- `app.go` (add wasm module)
- `x/truedemocracy/wasm_bindings.go` (custom queries)
- Contract updates in `contracts/src/`

**Estimated:** 2 weeks, 8-10 tests

---

### P1: Multi-Asset DEX via IBC

**Current state:** Single PNYX/ATOM pool with constant-product AMM.

**Goal:** Add BTC, ETH, LUSD pools via IBC transfers.

**Components:**
- IBC module integration in `app.go`
- IBC channel setup (Cosmos Hub, Osmosis, Juno)
- Bridge protocols for non-Cosmos assets (BTC, ETH via Axelar/Gravity)
- New pool creation for each asset pair
- Cross-chain transfer CLI commands

**Dependency:** Requires IBC relayer infrastructure and counterparty chain connections.

**Files:**
- `app.go` (IBC module wiring)
- `x/dex/` (multi-pool support, IBC denom handling)

**Estimated:** 3 weeks, 10-15 tests

---

### P2: UI Integration

**Current state:** Web wallet (React 18) and mobile wallet (React Native) exist
with basic governance UI. Backend API changes from v0.2.0 (new messages, scoring)
are not reflected in the frontends.

**Goal:** Update frontends to use all v0.2.0 features.

**Components:**
- Systemic Consensing score display in proposal feed
- Rating UI (-5 to +5 slider)
- Election voting UI (approve/abstain)
- Domain interest display in treasury view
- Real-time updates via WebSocket subscriptions

**Files:**
- `web-wallet/src/components/` (ProposalFeed, DomainInfo)
- `web-wallet/src/services/api.js` (new endpoints)
- `mobile-wallet/src/screens/` (GovernanceScreen)

**Estimated:** 2 weeks

---

### P2: Developer Tooling

- Add `golangci-lint.yml` with standard linters
- Add `.eslintrc` + `.prettierrc` for web/mobile wallets
- Migrate web-wallet from CRA to Vite (drops polyfill workaround)
- Add `.proto` files for message types (enables gRPC reflection)

**Estimated:** 1 week

---

## Estimated Deliverables

| Metric | v0.2.1 | v0.3.0 (Target) |
|--------|--------|-----------------|
| Unit Tests | 225 | ~265 |
| Tx Message Types | 19 | ~21 |
| WhitePaper Coverage | ~95% | ~98% (+ ZKP) |
| Feature Completion | Governance complete | + ZKP, IBC, CosmWasm |

---

## NOT in v0.3.0 (deferred to v1.0)

| Feature | Reason |
|---------|--------|
| Professional security audit | Requires external firm, budget |
| Proxy party functionality | Depends on stable governance |
| Genesis ceremony | Requires validator community |
| Mainnet deployment | Requires audit + infra |
| Network scalability tests (175+ nodes) | Requires testnet infra |

---

## Timeline

| Week | Focus |
|------|-------|
| 1-4 | ZKP Anonymity Layer |
| 5-6 | CosmWasm Integration |
| 7-9 | IBC + Multi-Asset DEX |
| 10-11 | UI Integration |
| 12 | Developer Tooling + Release |

---

## Scope Clarification

**v0.3.0 does NOT include:**
- SQL Indexer, Read-Only API, Explorer Frontend, Database integration

These features are deferred to **v0.4.0 — Optional Indexer Stack** (Q2 2026).

**Rationale:** Different architectural domain (off-chain vs on-chain), security-sensitive
(requires separate review), optional (not core consensus), large scope (deserves own milestone).

v0.3.0 remains focused on **core blockchain features** (on-chain only).

---

**End of v0.3.0 Roadmap**
